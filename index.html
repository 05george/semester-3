<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100svh;
    overflow-x: auto;
    overflow-y: hidden;
    background: black;
}
body {
 display: block;
 width: auto; 
 height: 100svh;
}
#loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #111;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    z-index: 9999;
    transition: opacity 0.5s ease;
}
#main-svg {
    height: 100svh;
    display: block;
    background: black;
    width: auto;
    opacity: 0; 
    transition: opacity 0.5s ease;
}
.image-mapper-shape {
    fill: transparent;
    stroke: transparent;
    stroke-width: 2px;
    transform-origin: center center;
    transition: transform 0.3s ease, filter 0.3s ease, stroke-width 0.3s ease;
    cursor: pointer; 
}
.q { stroke: red; }                /*Ø§Ù„Ø£Ø³Ø¦Ù„Ù‡*ğŸ”´*/
.v { stroke: blue; }           /*ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø´Ø±Ø­*ğŸ”µ*/
.ipc { stroke: white; } /*Ù…ÙˆØ§Ø¯ Ù„Ø§ ØªØ¶Ø§Ù Ø¹Ù„ÙŠ GPA*âšªï¸*/
.a { stroke: purple; }             /*Ø§Ø¬Ø§Ø¨Ø§Øª*ğŸŸ£*/
.l { stroke: yellow; }           /*Ù…Ø­Ø§Ø¶Ø±Ø§Øª*ğŸŸ¡*/
.s { stroke: green; }         /*Ø³ÙƒØ§Ø´Ù† Ø§Ù„Ø¹Ù…Ù„ÙŠ*ğŸŸ¢*/
.zoom-part {
    pointer-events: none;
    transition: transform 0.3s ease, filter 0.3s ease, opacity 0.3s ease;
    image-rendering: auto;
}
</style>
</head>
<body>

<div id="loading-overlay">
    Loading... Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...
</div>

<div id="scroll-container">
    <svg xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 12288 2454"
        preserveAspectRatio="xMinYMin slice"
        id="main-svg">
      <defs></defs>

<g transform="translate(0,0)">
    <image href="image/1.webp" x="0" y="0" width="1024" height="2454" />
</g>

<g transform="translate(1024,0)">
    <image href="image/2.png" width="1024" height="2454" />
</g>

<g transform="translate(2048,0)">
    <image href="image/3.png" width="1024" height="2454" />
</g>

<g transform="translate(3072,0)">
    <image href="image/4.webp" width="1024" height="2454" />
</g>

<g transform="translate(4096,0)">
    <image href="image/5.png" width="1024" height="2454" />
</g>

<g transform="translate(5120,0)">
    <image href="image/6.png" width="1024" height="2454" />
</g>

<g transform="translate(6144,0)">
    <image href="image/7.png" width="1024" height="2454" />
</g>

<g transform="translate(7168,0)">
    <image href="image/8.webp" width="1024" height="2454" />

    <g transform="translate(368,0)">
        <rect x="0" y="703" width="115" height="380" class="image-mapper-shape l" data-href="rrs-micro-1.pdf"/>
        <rect x="0" y="1083" width="115" height="253.5" class="image-mapper-shape l" data-href="rrs-patho-1.pdf"/>
        <rect x="0" y="1339" width="115" height="125" class="image-mapper-shape q" data-href="rrs-patho-q-1.pdf"/>
        <rect x="0" y="1465" width="115" height="378.5" class="image-mapper-shape l" data-href="rrs-physio-2.pdf"/>
        <rect x="0" y="1845" width="115" height="380" class="image-mapper-shape s" data-href="rrs-anatomy-1.pdf"/>
    </g>

    <g transform="translate(598,0)">
        <rect x="0" y="366" width="114.5" height="315" class="image-mapper-shape l" data-href="rrs-physio-1.pdf"/>
        <rect x="0" y="1846" width="115" height="253.4" class="image-mapper-shape l" data-href="rrs-physio-2.pdf"/>
        <rect x="0" y="2100" width="115" height="127" class="image-mapper-shape q" data-href="rrs-physio-q-1.pdf"/>
    </g>

    <g transform="translate(712.35,0)">
        <rect x="0" y="702" width="115" height="380" class="image-mapper-shape l" data-href="rrs-histo-1.pdf"/>
        <rect x="0" y="1465" width="115" height="380" class="image-mapper-shape l" data-href="rrs-anatomy-2.pdf"/>
    </g>
</g>

<g transform="translate(8192,0)">
    <image href="image/9.png" width="1024" height="2454"/>

    <g transform="translate(140,0)">
        <rect x="0" y="308.91" width="114.81" height="113.19" class="image-mapper-shape v" data-href="https://drive.google.com/file/d/1AUKRk1afwPQL9ixSlow6jgTM0vQrD4Pz/view?usp=drivesdk"/>
        <rect x="0" y="421.13" width="113.14" height="227.44" class="image-mapper-shape l" data-href="rrs-pharma-1.pdf"/>
        <rect x="0" y="876" width="115" height="349" class="image-mapper-shape ipc" data-href="ipc-book.pdf"/>
        <rect x="0" y="1225" width="57.5" height="121" class="image-mapper-shape q" data-href="ipc/q/9.pdf"/>
        <rect x="57.5" y="1225" width="57.5" height="121" class="image-mapper-shape a" data-href="ipc/a/9.pdf"/>
        <rect x="0" y="1810.38" width="115.86" height="470.24" class="image-mapper-shape s" data-href="#"/>

</g>

    <g transform="translate(370,0)">
        <rect x="0" y="1369" width="115" height="450" class="image-mapper-shape l" data-href="rrs-physio-3.pdf"/>
        <rect x="0" y="422.29" width="114.62" height="456.42" class="image-mapper-shape l" data-href="#"/>
        <rect x="0" y="1812.08" width="113.93" height="471.44" class="image-mapper-shape l" data-href="#"/>
    </g>

    <g transform="translate(485,0)">
        <rect x="0" y="1121.29" width="113.83" height="347.86" class="image-mapper-shape l" data-href="#"/>
        <rect x="0" y="1470.58" width="112.62" height="340.47" class="image-mapper-shape s" data-href="#"/>
        <rect x="0" y="1813.77" width="113.88" height="361.36" class="image-mapper-shape s" data-href="#"/>
    </g>

    <g transform="translate(600,0)">
        <rect x="0" y="1469.19" width="113.72" height="343.19" class="image-mapper-shape l" data-href="#"/>
        <rect x="0" y="421.64" width="115.79" height="457.44" class="image-mapper-shape s" data-href="#"/>
    </g>

    <g transform="translate(715,0)">
        <rect x="0" y="422.25" width="114.39" height="340.47" class="image-mapper-shape l" data-href="#"/>
        <rect x="0" y="877.49" width="114.63" height="485.43" class="image-mapper-shape s" data-href="#"/>
        <rect x="0" y="1364.73" width="113.21" height="447.54" class="image-mapper-shape l" data-href="#"/>
    </g>

</g>

<g transform="translate(9216,0)">
    <image href="image/10.png" width="1024" height="2454" />
</g>

<g transform="translate(10240,0)">
    <image href="image/11.png" width="1024" height="2454" />
</g>

<g transform="translate(11264,0)">
    <image href="image/12.webp" width="1024" height="2454" />
</g>

<g transform="translate(12288,0)">
    <image href="image/13.webp" width="1024" height="2454" />
</g>

</svg>
</div>

<script src="script.js"></script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100svh;
    overflow-x: auto;
    overflow-y: hidden;
    background: black;
}
body {
 display: block;
 width: auto; 
 height: 100svh;
}
#main-svg {
    height: 100svh;
    display: block;
    background: black;
    width: auto;
}
.image-mapper-shape {
    fill: transparent;
    stroke: transparent;
    stroke-width: 2px;
    transform-origin: center center;
    transition: transform 0.3s ease, filter 0.3s ease, stroke-width 0.3s ease;
    cursor: pointer; 
}
.q { stroke: red; }                /*Ø§Ù„Ø£Ø³Ø¦Ù„Ù‡*ğŸ”´*/
.v { stroke: blue; }           /*ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø´Ø±Ø­*ğŸ”µ*/
.ipc { stroke: white; } /*Ù…ÙˆØ§Ø¯ Ù„Ø§ ØªØ¶Ø§Ù Ø¹Ù„ÙŠ GPA*âšªï¸*/
.a { stroke: purple; }             /*Ø§Ø¬Ø§Ø¨Ø§Øª*ğŸŸ£*/
.l { stroke: yellow; }           /*Ù…Ø­Ø§Ø¶Ø±Ø§Øª*ğŸŸ¡*/
.s { stroke: green; }         /*Ø³ÙƒØ§Ø´Ù† Ø§Ù„Ø¹Ù…Ù„ÙŠ*ğŸŸ¢*/
.zoom-part {
    pointer-events: none;
    transition: transform 0.3s ease, filter 0.3s ease, opacity 0.3s ease;
    image-rendering: auto;
}
</style>
</head>
<body>
<div>
    <svg xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 12288 2454"
        preserveAspectRatio="xMinYMin slice"
        id="main-svg">
      <defs></defs>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„ -->
<g transform="translate(0,0)">
    <image href="image/1.webp" x="0" y="0" width="1024" height="2454" />
</g>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ -->
<g transform="translate(1024,0)">
    <image href="image/2.png" width="1024" height="2454" />
</g>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù„Ø« -->
<g transform="translate(2048,0)">
    <image href="image/3.png" width="1024" height="2454" />
</g>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø±Ø§Ø¨Ø¹ -->
<g transform="translate(3072,0)">
    <image href="image/4.webp" width="1024" height="2454" />
</g>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø³ -->
<g transform="translate(4096,0)">
    <image href="image/5.png" width="1024" height="2454" />
</g>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¯Ø³ -->
<g transform="translate(5120,0)">
    <image href="image/6.png" width="1024" height="2454" />
</g>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¨Ø¹ -->
<g transform="translate(6144,0)">
    <image href="image/7.png" width="1024" height="2454" />
</g>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù…Ù† -->
<g transform="translate(7168,0)">
    <image href="image/8.webp" width="1024" height="2454" />

    <g transform="translate(368,0)">
        <rect x="0" y="703" width="115" height="380" class="image-mapper-shape l" data-href="rrs-micro-1.pdf"/>
        <rect x="0" y="1083" width="115" height="253.5" class="image-mapper-shape l" data-href="rrs-patho-1.pdf"/>
        <rect x="0" y="1339" width="115" height="125" class="image-mapper-shape q" data-href="rrs-patho-q-1.pdf"/>
        <rect x="0" y="1465" width="115" height="378.5" class="image-mapper-shape l" data-href="rrs-physio-2.pdf"/>
        <rect x="0" y="1845" width="115" height="380" class="image-mapper-shape s" data-href="rrs-anatomy-1.pdf"/>
    </g>

    <g transform="translate(598,0)">
        <rect x="0" y="366" width="114.5" height="315" class="image-mapper-shape l" data-href="rrs-physio-1.pdf"/>
        <rect x="0" y="1846" width="115" height="253.4" class="image-mapper-shape l" data-href="rrs-physio-2.pdf"/>
        <rect x="0" y="2100" width="115" height="127" class="image-mapper-shape q" data-href="rrs-physio-q-1.pdf"/>
    </g>

    <g transform="translate(712.35,0)">
        <rect x="0" y="702" width="115" height="380" class="image-mapper-shape l" data-href="rrs-histo-1.pdf"/>
        <rect x="0" y="1465" width="115" height="380" class="image-mapper-shape l" data-href="rrs-anatomy-2.pdf"/>
    </g>
</g>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„ØªØ§Ø³Ø¹ -->
<g transform="translate(8192,0)">
    <image href="image/9.png" width="1024" height="2454"/>

    <g transform="translate(140,0)">
        <rect x="0" y="308.91" width="114.81" height="113.19" class="image-mapper-shape v" data-href="https://drive.google.com/file/d/..."/>
        <rect x="0" y="421.13" width="113.14" height="227.44" class="image-mapper-shape l" data-href="rrs-pharma-1.pdf"/>
        <rect x="0" y="876" width="115" height="349" class="image-mapper-shape ipc" data-href="ipc/book.pdf"/>
        <rect x="0" y="1225" width="57.5" height="121" class="image-mapper-shape q" data-href="ipc/q/9.pdf"/>
        <rect x="57.5" y="1225" width="57.5" height="121" class="image-mapper-shape a" data-href="ipc/a/9.pdf"/>
        <rect x="0" y="1810.38" width="115.86" height="470.24" class="image-mapper-shape s" data-href="#"/>
    </g>

    <g transform="translate(370,0)">
        <rect x="0" y="1369" width="115" height="450" class="image-mapper-shape l" data-href="rrs-physio-3.pdf"/>
        <rect x="0" y="422.29" width="114.62" height="456.42" class="image-mapper-shape l" data-href="#"/>
        <rect x="0" y="1812.08" width="113.93" height="471.44" class="image-mapper-shape l" data-href="#"/>
    </g>

    <g transform="translate(485,0)">
        <rect x="0" y="1121.29" width="113.83" height="347.86" class="image-mapper-shape l" data-href="#"/>
        <rect x="0" y="1470.58" width="112.62" height="340.47" class="image-mapper-shape s" data-href="#"/>
        <rect x="0" y="1813.77" width="113.88" height="361.36" class="image-mapper-shape s" data-href="#"/>
    </g>

    <g transform="translate(600,0)">
        <rect x="0" y="1469.19" width="113.72" height="343.19" class="image-mapper-shape l" data-href="#"/>
        <rect x="0" y="421.64" width="115.79" height="457.44" class="image-mapper-shape s" data-href="#"/>
    </g>

    <g transform="translate(715,0)">
        <rect x="0" y="422.25" width="114.39" height="340.47" class="image-mapper-shape l" data-href="#"/>
        <rect x="0" y="877.49" width="114.63" height="485.43" class="image-mapper-shape s" data-href="#"/>
        <rect x="0" y="1364.73" width="113.21" height="447.54" class="image-mapper-shape l" data-href="#"/>
    </g>

</g>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø¹Ø§Ø´Ø± -->
<g transform="translate(9216,0)">
    <image href="image/10.png" width="1024" height="2454" />
</g>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø± -->
<g transform="translate(10240,0)">
    <image href="image/11.png" width="1024" height="2454" />
</g>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø± -->
<g transform="translate(11264,0)">
    <image href="image/12.webp" width="1024" height="2454" />
</g>

<!-- Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù„Ø« Ø¹Ø´Ø± -->
<g transform="translate(12288,0)">
    <image href="image/13.webp" width="1024" height="2454" />
</g>

</svg>
<script src="script.js"></script>
</body>
</html>

const mainSvg = document.getElementById('main-svg');
const clipDefs = mainSvg.querySelector('defs');
const scrollContainer = document.querySelector('div');

const activeState = {
    rect: null,
    zoomPart: null,
    zoomText: null,
    animationId: null,
    clipPathId: null
};

function updateDynamicSizes() {
    const images = mainSvg.querySelectorAll('image');
    if (!images.length) return;
    const firstImage = images[0];
    const imageWidth = parseFloat(firstImage.getAttribute('width')) || 1024;
    const imageHeight = parseFloat(firstImage.getAttribute('height')) || 2454;
    const totalWidth = images.length * imageWidth;
    mainSvg.setAttribute('viewBox', `0 0 ${totalWidth} ${imageHeight}`);
    window.MAX_SCROLL_LEFT = totalWidth - window.innerWidth;
}

updateDynamicSizes();

scrollContainer.addEventListener('scroll', function () {
    if (this.scrollLeft > window.MAX_SCROLL_LEFT) {
        this.scrollLeft = window.MAX_SCROLL_LEFT;
    }
});

function getCumulativeTranslate(element) {
    let x = 0, y = 0;
    let current = element;
    while (current && current.tagName !== 'svg') {
        const transformAttr = current.getAttribute('transform');
        if (transformAttr) {
            const match = transformAttr.match(/translate\(\s*([\d.-]+)[ ,]+([\d.-]+)\s*\)/);
            if (match) { x += parseFloat(match[1]); y += parseFloat(match[2]); }
        }
        current = current.parentNode;
    }
    return { x, y };
}

function getGroupImage(element) {
    let current = element;
    while (current && current.tagName !== 'svg') {
        if (current.tagName === 'g') {
            const images = [...current.children].filter(c => c.tagName === 'image');
            if (images.length) {
                const baseImage = images[0];
                return {
                    src: baseImage.getAttribute('href'),
                    width: parseFloat(baseImage.getAttribute('width')),
                    height: parseFloat(baseImage.getAttribute('height')),
                    group: current
                };
            }
        }
        current = current.parentNode;
    }
    return null;
}

function cleanupHover() {
    if (!activeState.rect) return;
    if (activeState.animationId) clearInterval(activeState.animationId);
    activeState.rect.style.transform = 'scale(1)';
    activeState.rect.style.filter = 'none';
    activeState.rect.style.strokeWidth = '2px';
    if (activeState.zoomPart) activeState.zoomPart.remove();
    if (activeState.zoomText) activeState.zoomText.remove();
    const currentClip = document.getElementById(activeState.clipPathId);
    if (currentClip) currentClip.remove();
    Object.assign(activeState, { rect: null, zoomPart: null, zoomText: null, animationId: null, clipPathId: null });
}

function startHover() {
    const rect = this;
    if (activeState.rect === rect) return;
    cleanupHover();
    activeState.rect = rect;

    const i = rect.getAttribute('data-index') || Date.now();
    const clipPathId = `clip-${i}-${Date.now()}`;
    activeState.clipPathId = clipPathId;

    const scale = 1.1;
    const x = parseFloat(rect.getAttribute('x'));
    const y = parseFloat(rect.getAttribute('y'));
    const width = parseFloat(rect.getAttribute('width'));
    const height = parseFloat(rect.getAttribute('height'));

    const cumulative = getCumulativeTranslate(rect);
    const absoluteX = x + cumulative.x;
    const absoluteY = y + cumulative.y;

    const imageData = getGroupImage(rect);
    if (!imageData) return;

    const clip = document.createElementNS('http://www.w3.org/2000/svg', 'clipPath');
    clip.setAttribute('id', clipPathId);
    const clipRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
    clipRect.setAttribute('x', absoluteX);
    clipRect.setAttribute('y', absoluteY);
    clipRect.setAttribute('width', width);
    clipRect.setAttribute('height', height);
    clipDefs.appendChild(clip).appendChild(clipRect);

    const zoomPart = document.createElementNS('http://www.w3.org/2000/svg', 'image');
    zoomPart.setAttribute('href', imageData.src);
    zoomPart.setAttribute('width', imageData.width);
    zoomPart.setAttribute('height', imageData.height);
    zoomPart.setAttribute('class', 'zoom-part');
    zoomPart.setAttribute('clip-path', `url(#${clipPathId})`);

    const groupTransform = imageData.group.getAttribute('transform');
    const match = groupTransform ? groupTransform.match(/translate\(([\d.-]+),([\d.-]+)\)/) : null;
    const groupX = match ? parseFloat(match[1]) : 0;
    const groupY = match ? parseFloat(match[2]) : 0;

    zoomPart.setAttribute('x', groupX);
    zoomPart.setAttribute('y', groupY);
    zoomPart.style.opacity = 0;
    mainSvg.appendChild(zoomPart);
    activeState.zoomPart = zoomPart;

    const centerX = absoluteX + width / 2;
    const centerY = absoluteY + height / 2;

    rect.style.transformOrigin = `${x + width / 2}px ${y + height / 2}px`;
    rect.style.transform = `scale(${scale})`;
    rect.style.strokeWidth = '4px';
    zoomPart.style.transformOrigin = `${centerX}px ${centerY}px`;
    zoomPart.style.transform = `scale(${scale})`;
    zoomPart.style.opacity = 1;

    let hue = 0;
    activeState.animationId = setInterval(() => {
        hue = (hue + 10) % 360;
        const glow = `drop-shadow(0 0 8px hsl(${hue},100%,55%)) drop-shadow(0 0 14px hsl(${(hue + 60) % 360},100%,60%))`;
        rect.style.filter = glow;
        zoomPart.style.filter = glow;
        if (activeState.zoomText) activeState.zoomText.style.filter = glow;
    }, 100);

    const baseText = rect.parentNode.querySelector('text');
    if (baseText) {
        const zoomText = baseText.cloneNode(true);
        const baseFont = parseFloat(baseText.style.fontSize);
        zoomText.style.fontSize = (baseFont * 2) + 'px';
        zoomText.style.fill = 'white';
        zoomText.style.pointerEvents = 'none';
        zoomText.style.userSelect = 'none';
        zoomText.style.opacity = '1';
        zoomText.setAttribute('x', absoluteX + width / 2);
        zoomText.setAttribute('y', absoluteY + baseFont * 1.5);
        zoomText.setAttribute('text-anchor', 'middle');
        mainSvg.appendChild(zoomText);
        activeState.zoomText = zoomText;
    }
}

function stopHover() {
    if (activeState.rect === this) setTimeout(cleanupHover, 50);
}

function attachHover(rect, i) {
    rect.setAttribute('data-index', i);
    rect.addEventListener('mouseover', startHover);
    rect.addEventListener('mouseout', stopHover);
    rect.addEventListener('touchstart', startHover);
    rect.addEventListener('touchend', cleanupHover);
}

document.querySelectorAll('rect.image-mapper-shape').forEach(rect => {
    const href = rect.getAttribute('data-href') || '';
    const fileName = href.split('/').pop().split('#')[0] || '';
    const rectWidth = parseFloat(rect.getAttribute('width'));
    const rectX = parseFloat(rect.getAttribute('x'));
    const rectY = parseFloat(rect.getAttribute('y'));
    const minFont = 8;
    const maxFont = 16;
    const scaleFactor = 0.12;
    let fontSize = rectWidth * scaleFactor;
    fontSize = Math.max(minFont, Math.min(maxFont, fontSize));
    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
    text.setAttribute('x', rectX + rectWidth / 2);
    text.setAttribute('y', rectY + fontSize + 6);
    text.setAttribute('text-anchor', 'middle');
    text.textContent = fileName;
    text.style.fontSize = fontSize + 'px';
    text.style.fill = 'white';
    text.style.pointerEvents = 'none';
    rect.parentNode.appendChild(text);
});

document.querySelectorAll('rect.image-mapper-shape').forEach((rect, i) => {
    rect.setAttribute('data-processed', 'true');
    attachHover(rect, i);
});

const rootObserver = new MutationObserver(mutations => {
    mutations.forEach(mutation => {
        mutation.addedNodes.forEach(node => {
            if (node.nodeType === 1) {
                if (node.matches('rect.image-mapper-shape') && !node.hasAttribute('data-processed')) {
                    attachHover(node, Date.now());
                    node.setAttribute('data-processed', 'true');
                }
                if (node.querySelector) {
                    node.querySelectorAll('rect.image-mapper-shape:not([data-processed])')
                        .forEach(rect => {
                            attachHover(rect, Date.now());
                            rect.setAttribute('data-processed', 'true');
                        });
                }
            }
        });
    });
});
rootObserver.observe(mainSvg, { childList: true, subtree: true });

Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø´ Ø¨ÙØªØ­ Ø¨Ø§Ù„Ù„Ù…Ø³ Ùˆ Ø§Ù„Ù†Øµ Ø¨ÙŠØ®ØªÙÙŠ Ù…Ø¹ Ø§Ù„Ù‡Ø§ÙØ±